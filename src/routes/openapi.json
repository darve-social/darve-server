{
  "openapi": "3.0.3",
  "info": {
    "title": "Darve Server API",
    "description": "API documentation for the Darve Server including users, posts, notifications, auth, discussions, tasks, wallet, and follows",
    "version": "1.0.0"
  },
  "servers": [
    {
      "url": "",
      "description": "Development server"
    }
  ],
  "security": [],
  "paths": {
    "/api/auth/sign_with_facebook": {
      "post": {
        "tags": ["Authentication"],
        "summary": "Sign in with Facebook",
        "description": "Authenticate user using Facebook token",
        "security": [],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/SocialSignInput"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful authentication",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/AuthResponse"
                }
              }
            }
          },
          "401": {
            "description": "Authentication failed"
          }
        }
      }
    },
    "/api/auth/sign_with_apple": {
      "post": {
        "tags": ["Authentication"],
        "summary": "Sign in with Apple",
        "description": "Authenticate user using Apple token",
        "security": [],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/SocialSignInput"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful authentication",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/AuthResponse"
                }
              }
            }
          },
          "401": {
            "description": "Authentication failed"
          }
        }
      }
    },
    "/api/auth/sign_with_google": {
      "post": {
        "tags": ["Authentication"],
        "summary": "Sign in with Google",
        "description": "Authenticate user using Google token",
        "security": [],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/SocialSignInput"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful authentication",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/AuthResponse"
                }
              }
            }
          },
          "401": {
            "description": "Authentication failed"
          }
        }
      }
    },
    "/api/login": {
      "post": {
        "tags": ["Authentication"],
        "summary": "Login with username and password",
        "description": "Authenticate user using username and password",
        "security": [],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/AuthLoginInput"
              }
            },
            "application/x-www-form-urlencoded": {
              "schema": {
                "$ref": "#/components/schemas/AuthLoginInput"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful login",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/AuthResponse"
                }
              }
            }
          },
          "401": {
            "description": "Invalid credentials"
          }
        }
      }
    },
    "/api/register": {
      "post": {
        "tags": ["Authentication"],
        "summary": "Register new user",
        "description": "Create a new user account",
        "security": [],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/AuthRegisterInput"
              }
            },
            "application/x-www-form-urlencoded": {
              "schema": {
                "$ref": "#/components/schemas/AuthRegisterInput"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful registration",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/AuthResponse"
                }
              }
            }
          },
          "400": {
            "description": "Invalid input data"
          }
        }
      }
    },
    "/api/forgot_password": {
      "post": {
        "tags": ["Authentication"],
        "summary": "Request password reset",
        "description": "Send password reset email to user",
        "security": [],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/ForgotPasswordInput"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Password reset email sent"
          },
          "400": {
            "description": "Invalid email or username"
          }
        }
      }
    },
    "/api/reset_password": {
      "post": {
        "tags": ["Authentication"],
        "summary": "Reset password",
        "description": "Reset user password using verification code",
        "security": [],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/ForgotPasswordResetInput"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Password reset successful"
          },
          "400": {
            "description": "Invalid verification code or input"
          }
        }
      }
    },
    "/api/notifications": {
      "get": {
        "tags": ["Notifications"],
        "summary": "Get user notifications",
        "description": "Retrieve notifications for the current user",
        "security": [
          {
            "cookieAuth": []
          }
        ],
        "parameters": [
          {
            "name": "start",
            "in": "query",
            "description": "Pagination start index",
            "required": false,
            "schema": {
              "type": "integer",
              "minimum": 0,
              "default": 0
            }
          },
          {
            "name": "count",
            "in": "query",
            "description": "Number of notifications to return",
            "required": false,
            "schema": {
              "type": "integer",
              "minimum": 1,
              "maximum": 100,
              "default": 50
            }
          },
          {
            "name": "is_read",
            "in": "query",
            "description": "Filter by read status",
            "required": false,
            "schema": {
              "type": "boolean"
            }
          },
          {
            "name": "order_dir",
            "in": "query",
            "description": "Order direction",
            "required": false,
            "schema": {
              "type": "string",
              "enum": ["ASC", "DESC"],
              "default": "DESC"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "List of notifications",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/UserNotification"
                  }
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized"
          }
        }
      }
    },
    "/api/notifications/read": {
      "post": {
        "tags": ["Notifications"],
        "summary": "Mark all notifications as read",
        "description": "Mark all notifications as read for the current user",
        "security": [
          {
            "cookieAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "All notifications marked as read"
          },
          "401": {
            "description": "Unauthorized"
          }
        }
      }
    },
    "/api/notifications/count": {
      "get": {
        "tags": ["Notifications"],
        "summary": "Get notification count",
        "description": "Get the count of notifications for the current user",
        "security": [
          {
            "cookieAuth": []
          }
        ],
        "parameters": [
          {
            "name": "is_read",
            "in": "query",
            "description": "Filter by read status",
            "required": false,
            "schema": {
              "type": "boolean"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Notification count",
            "content": {
              "application/json": {
                "schema": {
                  "type": "integer",
                  "format": "int64"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized"
          }
        }
      }
    },
    "/api/notifications/sse": {
      "get": {
        "tags": ["Notifications"],
        "summary": "Server-sent events for notifications",
        "description": "Real-time notification stream using Server-Sent Events",
        "security": [
          {
            "cookieAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "SSE stream of notifications",
            "content": {
              "text/event-stream": {
                "schema": {
                  "type": "string"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized"
          }
        }
      }
    },
    "/api/notifications/{notification_id}/read": {
      "post": {
        "tags": ["Notifications"],
        "summary": "Mark notification as read",
        "description": "Mark a specific notification as read",
        "security": [
          {
            "cookieAuth": []
          }
        ],
        "parameters": [
          {
            "name": "notification_id",
            "in": "path",
            "required": true,
            "description": "ID of the notification to mark as read",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Notification marked as read"
          },
          "401": {
            "description": "Unauthorized"
          },
          "404": {
            "description": "Notification not found"
          }
        }
      }
    },
    "/api/tasks/received": {
      "get": {
        "tags": ["Tasks"],
        "summary": "Get received task requests",
        "description": "Get task requests received by the current user",
        "security": [
          {
            "cookieAuth": []
          }
        ],
        "parameters": [
          {
            "name": "status",
            "in": "query",
            "description": "Filter by participant status",
            "required": false,
            "schema": {
              "type": "string",
              "enum": ["Requested", "Accepted", "Rejected", "Delivered"]
            }
          },
          {
            "name": "is_ended",
            "in": "query",
            "description": "Filter by task end status",
            "required": false,
            "schema": {
              "type": "boolean"
            }
          },
          {
            "name": "order_dir",
            "in": "query",
            "description": "Order direction",
            "required": false,
            "schema": {
              "type": "string",
              "enum": ["ASC", "DESC"],
              "default": "DESC"
            }
          },
          {
            "name": "start",
            "in": "query",
            "description": "Pagination start index",
            "required": false,
            "schema": {
              "type": "integer",
              "minimum": 0,
              "default": 0
            }
          },
          {
            "name": "count",
            "in": "query",
            "description": "Number of tasks to return",
            "required": false,
            "schema": {
              "type": "integer",
              "minimum": 1,
              "maximum": 100,
              "default": 20
            }
          }
        ],
        "responses": {
          "200": {
            "description": "List of received task requests",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/TaskViewForParticipant"
                  }
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized"
          }
        }
      }
    },
    "/api/tasks/given": {
      "get": {
        "tags": ["Tasks"],
        "summary": "Get given task requests",
        "description": "Get task requests created by the current user",
        "security": [
          {
            "cookieAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "List of given task requests",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/TaskRequestView"
                  }
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized"
          }
        }
      }
    },
    "/api/tasks/{task_id}/accept": {
      "post": {
        "tags": ["Tasks"],
        "summary": "Accept task request",
        "description": "Accept a task request",
        "security": [
          {
            "cookieAuth": []
          }
        ],
        "parameters": [
          {
            "name": "task_id",
            "in": "path",
            "required": true,
            "description": "ID of the task to accept",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Task accepted successfully"
          },
          "401": {
            "description": "Unauthorized"
          },
          "404": {
            "description": "Task not found"
          }
        }
      }
    },
    "/api/tasks/{task_id}/reject": {
      "post": {
        "tags": ["Tasks"],
        "summary": "Reject task request",
        "description": "Reject a task request",
        "security": [
          {
            "cookieAuth": []
          }
        ],
        "parameters": [
          {
            "name": "task_id",
            "in": "path",
            "required": true,
            "description": "ID of the task to reject",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Task rejected successfully"
          },
          "401": {
            "description": "Unauthorized"
          },
          "404": {
            "description": "Task not found"
          }
        }
      }
    },
    "/api/tasks/{task_id}/deliver": {
      "post": {
        "tags": ["Tasks"],
        "summary": "Deliver task",
        "description": "Mark a task as delivered",
        "security": [
          {
            "cookieAuth": []
          }
        ],
        "parameters": [
          {
            "name": "task_id",
            "in": "path",
            "required": true,
            "description": "ID of the task to deliver",
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/DeliverTaskRequestInput"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Task delivered successfully"
          },
          "401": {
            "description": "Unauthorized"
          },
          "404": {
            "description": "Task not found"
          }
        }
      }
    },
    "/api/tasks/{task_id}/donor": {
      "post": {
        "tags": ["Tasks"],
        "summary": "Add or update donor",
        "description": "Add or update a donor for a task",
        "security": [
          {
            "cookieAuth": []
          }
        ],
        "parameters": [
          {
            "name": "task_id",
            "in": "path",
            "required": true,
            "description": "ID of the task",
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/TaskRequestOfferInput"
              }
            },
            "application/x-www-form-urlencoded": {
              "schema": {
                "$ref": "#/components/schemas/TaskRequestOfferInput"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Donor added/updated successfully"
          },
          "401": {
            "description": "Unauthorized"
          },
          "404": {
            "description": "Task not found"
          }
        }
      }
    },
    "/api/users/{user_id}/followers/count": {
      "get": {
        "tags": ["Follows"],
        "summary": "Get user's followers count",
        "description": "Get the number of followers for a specific user",
        "security": [
          {
            "cookieAuth": []
          }
        ],
        "parameters": [
          {
            "name": "user_id",
            "in": "path",
            "required": true,
            "description": "The ID of the user",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Followers count",
            "content": {
              "application/json": {
                "schema": {
                  "type": "integer",
                  "format": "int32",
                  "description": "Number of followers"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized"
          }
        }
      }
    },
    "/api/users/{user_id}/following/count": {
      "get": {
        "tags": ["Follows"],
        "summary": "Get user's following count",
        "description": "Get the number of users a specific user is following",
        "security": [
          {
            "cookieAuth": []
          }
        ],
        "parameters": [
          {
            "name": "user_id",
            "in": "path",
            "required": true,
            "description": "The ID of the user",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Following count",
            "content": {
              "application/json": {
                "schema": {
                  "type": "integer",
                  "format": "int32",
                  "description": "Number of users being followed"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized"
          }
        }
      }
    },
    "/api/users/current/following/posts": {
      "get": {
        "tags": ["Users"],
        "summary": "Get posts from followed users",
        "description": "Get posts from users that the current user follows",
        "security": [
          {
            "cookieAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "Posts from followed users",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/DiscussionPostView"
                  }
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized"
          }
        }
      }
    },
    "/api/users/current/email/verification/start": {
      "post": {
        "tags": ["Users"],
        "summary": "Start email verification",
        "description": "Start email verification process for user opt-in",
        "security": [
          {
            "cookieAuth": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/EmailVerificationStartInput"
              }
            },
            "application/x-www-form-urlencoded": {
              "schema": {
                "$ref": "#/components/schemas/EmailVerificationStartInput"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Email verification started"
          },
          "401": {
            "description": "Unauthorized"
          }
        }
      }
    },
    "/api/users/current/email/verification/confirm": {
      "post": {
        "tags": ["Users"],
        "summary": "Confirm email verification",
        "description": "Confirm email verification with code for user opt-in",
        "security": [
          {
            "cookieAuth": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/EmailVerificationConfirmInput"
              }
            },
            "application/x-www-form-urlencoded": {
              "schema": {
                "$ref": "#/components/schemas/EmailVerificationConfirmInput"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Email verified successfully"
          },
          "401": {
            "description": "Unauthorized"
          }
        }
      }
    },
    "/api/users/current": {
      "get": {
        "tags": ["Users"],
        "summary": "Get current user",
        "description": "Get current authenticated user information",
        "security": [
          {
            "cookieAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "Current user information",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/UserView"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized"
          }
        }
      },
      "patch": {
        "tags": ["Users"],
        "summary": "Update current user",
        "description": "Update current user profile",
        "security": [
          {
            "cookieAuth": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "multipart/form-data": {
              "schema": {
                "$ref": "#/components/schemas/ProfileSettingsFormInput"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "User updated successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/UserView"
                }
              }
            }
          },
          "400": {
            "description": "Validation error - invalid input data"
          },
          "401": {
            "description": "Unauthorized"
          }
        }
      }
    },
    "/api/users/current/set_password/start": {
      "post": {
        "tags": ["Users"],
        "summary": "Start password set process",
        "description": "Start password set process for current user",
        "security": [
          {
            "cookieAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "Password set process started"
          },
          "401": {
            "description": "Unauthorized"
          }
        }
      }
    },
    "/api/users/current/set_password/confirm": {
      "post": {
        "tags": ["Users"],
        "summary": "Confirm password setting",
        "description": "Confirm password setting with verification code for current user",
        "security": [
          {
            "cookieAuth": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/SetPasswordInput"
              }
            },
            "application/x-www-form-urlencoded": {
              "schema": {
                "$ref": "#/components/schemas/SetPasswordInput"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Password set successfully"
          },
          "400": {
            "description": "Invalid password or verification code"
          },
          "401": {
            "description": "Unauthorized"
          }
        }
      }
    },
    "/api/users/current/update_password/start": {
      "post": {
        "tags": ["Users"],
        "summary": "Start password update process",
        "description": "Start password update process for current user",
        "security": [
          {
            "cookieAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "Password update process started"
          },
          "401": {
            "description": "Unauthorized"
          }
        }
      }
    },
    "/api/users/current/update_password/confirm": {
      "post": {
        "tags": ["Users"],
        "summary": "Confirm password update",
        "description": "Confirm password update with verification code for current user",
        "security": [
          {
            "cookieAuth": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/ResetPasswordInput"
              }
            },
            "application/x-www-form-urlencoded": {
              "schema": {
                "$ref": "#/components/schemas/ResetPasswordInput"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Password updated successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "string",
                  "example": "Password updated successfully."
                }
              }
            }
          },
          "400": {
            "description": "Invalid password or verification code"
          },
          "401": {
            "description": "Unauthorized"
          }
        }
      }
    },
    "/api/users/current/posts": {
      "post": {
        "tags": ["Users"],
        "summary": "Create post for current user",
        "description": "Create a new post for the current user",
        "security": [
          {
            "cookieAuth": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "multipart/form-data": {
              "schema": {
                "$ref": "#/components/schemas/PostInput"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Post created successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Post"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized"
          }
        }
      },
      "get": {
        "tags": ["Users"],
        "summary": "Get current user posts",
        "description": "Get posts created by the current user",
        "security": [
          {
            "cookieAuth": []
          }
        ],
        "parameters": [
          {
            "name": "topic_id",
            "in": "query",
            "description": "Filter by topic ID",
            "required": false,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "start",
            "in": "query",
            "description": "Pagination start index",
            "required": false,
            "schema": {
              "type": "integer",
              "default": 0
            }
          },
          {
            "name": "count",
            "in": "query",
            "description": "Number of posts to return",
            "required": false,
            "schema": {
              "type": "integer",
              "default": 20
            }
          }
        ],
        "responses": {
          "200": {
            "description": "User posts",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/PostView"
                  }
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized"
          }
        }
      }
    },
    "/api/users/current/otp/enable": {
      "post": {
        "tags": ["Users"],
        "summary": "Enable OTP for current user",
        "description": "Enable two-factor authentication (OTP) for the current user",
        "security": [
          {
            "cookieAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "OTP enabled successfully, totp data",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/TotpResponse"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized"
          }
        }
      }
    },
    "/api/users/current/otp/disable": {
      "post": {
        "tags": ["Users"],
        "summary": "Disable OTP for current user",
        "description": "Disable two-factor authentication (OTP) for the current user",
        "security": [
          {
            "cookieAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "OTP disabled successfully"
          },
          "401": {
            "description": "Unauthorized"
          }
        }
      }
    },
    "/api/users/current/otp/verification": {
      "post": {
        "tags": ["Users"],
        "summary": "Verify OTP setup",
        "description": "Verify OTP token during setup process to enable two-factor authentication",
        "security": [
          {
            "cookieAuth": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/OtpValidationInput"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "OTP verification successful, 2FA enabled",
            "content": {
              "application/json": {
                "schema": {
                  "type": "boolean"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden - OTP already enabled or invalid token"
          },
          "400": {
            "description": "Bad request - Token is invalid"
          },
          "401": {
            "description": "Unauthorized"
          }
        }
      }
    },
    "/api/users/current/otp/validate": {
      "post": {
        "tags": ["Users"],
        "summary": "Validate OTP token",
        "description": "Validate OTP token for a user with OTP enabled and return full authentication token",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/OtpValidationInput"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "OTP validated successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/AuthResponse"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden - OTP not enabled for user or invalid OTP token"
          },
          "401": {
            "description": "Unauthorized"
          }
        }
      }
    },
    "/api/users": {
      "get": {
        "tags": ["Users"],
        "summary": "Search users",
        "description": "Search for users",
        "security": [
          {
            "cookieAuth": []
          }
        ],
        "parameters": [
          {
            "name": "query",
            "in": "query",
            "description": "Search query",
            "required": true,
            "schema": {
              "type": "string",
              "minLength": 3
            }
          }
        ],
        "responses": {
          "200": {
            "description": "List of users matching the search query",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/UserView"
                  }
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized"
          }
        }
      }
    },
    "/api/posts": {
      "get": {
        "tags": ["Posts"],
        "summary": "Get posts",
        "description": "Get posts with optional filtering",
        "security": [
          {
            "cookieAuth": []
          }
        ],
        "parameters": [
          {
            "name": "tag",
            "in": "query",
            "description": "Filter by tag",
            "required": true,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "order_dir",
            "in": "query",
            "description": "Order direction",
            "required": false,
            "schema": {
              "type": "string",
              "enum": ["ASC", "DESC"]
            }
          },
          {
            "name": "start",
            "in": "query",
            "description": "Pagination start index",
            "required": false,
            "schema": {
              "type": "integer",
              "default": 0
            }
          },
          {
            "name": "count",
            "in": "query",
            "description": "Number of posts to return",
            "required": false,
            "schema": {
              "type": "integer",
              "default": 100
            }
          }
        ],
        "responses": {
          "200": {
            "description": "List of posts",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/Post"
                  }
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized"
          }
        }
      }
    },
    "/api/posts/{post_id}/tasks": {
      "post": {
        "tags": ["Posts"],
        "summary": "Create task for post",
        "description": "Create a task related to a post",
        "security": [
          {
            "cookieAuth": []
          }
        ],
        "parameters": [
          {
            "name": "post_id",
            "in": "path",
            "required": true,
            "description": "ID of the post",
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/TaskRequestInput"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Task created successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/TaskRequestView"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized"
          }
        }
      },
      "get": {
        "tags": ["Posts"],
        "summary": "Get tasks for post",
        "description": "Get tasks related to a post",
        "security": [
          {
            "cookieAuth": []
          }
        ],
        "parameters": [
          {
            "name": "post_id",
            "in": "path",
            "required": true,
            "description": "ID of the post",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Tasks for the post",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/TaskRequestView"
                  }
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized"
          }
        }
      }
    },
    "/api/posts/{post_id}/like": {
      "post": {
        "tags": ["Posts"],
        "summary": "Like a post",
        "description": "Like a specific post",
        "security": [
          {
            "cookieAuth": []
          }
        ],
        "parameters": [
          {
            "name": "post_id",
            "in": "path",
            "required": true,
            "description": "ID of the post to like",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Post liked successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/PostLikeResponse"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized"
          }
        }
      }
    },
    "/api/posts/{post_id}/unlike": {
      "delete": {
        "tags": ["Posts"],
        "summary": "Unlike a post",
        "description": "Remove like from a specific post",
        "security": [
          {
            "cookieAuth": []
          }
        ],
        "parameters": [
          {
            "name": "post_id",
            "in": "path",
            "required": true,
            "description": "ID of the post to unlike",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Post unliked successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/PostLikeResponse"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized"
          }
        }
      }
    },
    "/api/posts/{post_id}/replies": {
      "post": {
        "tags": ["Posts"],
        "summary": "Create reply to post",
        "description": "Create a reply to a specific post",
        "security": [
          {
            "cookieAuth": []
          }
        ],
        "parameters": [
          {
            "name": "post_id",
            "in": "path",
            "required": true,
            "description": "ID of the post to reply to",
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/PostReplyInput"
              }
            },
            "application/x-www-form-urlencoded": {
              "schema": {
                "$ref": "#/components/schemas/PostReplyInput"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Reply created successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ReplyView"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized"
          }
        }
      },
      "get": {
        "tags": ["Posts"],
        "summary": "Get replies to post",
        "description": "Get replies to a specific post",
        "security": [
          {
            "cookieAuth": []
          }
        ],
        "parameters": [
          {
            "name": "post_id",
            "in": "path",
            "required": true,
            "description": "ID of the post",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "start",
            "in": "query",
            "description": "Pagination start index",
            "required": false,
            "schema": {
              "type": "integer",
              "default": 0
            }
          },
          {
            "name": "count",
            "in": "query",
            "description": "Number of reply to return",
            "required": false,
            "schema": {
              "type": "integer",
              "default": 50
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Replies to the post",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/ReplyView"
                  }
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized"
          }
        }
      }
    },
    "/api/discussions": {
      "get": {
        "tags": ["Discussions"],
        "summary": "Get discussions",
        "description": "Get discussions for the current user",
        "security": [
          {
            "cookieAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "List of discussions",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/Discussion"
                  }
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized"
          }
        }
      },
      "post": {
        "tags": ["Discussions"],
        "summary": "Create discussion",
        "description": "Create a new discussion",
        "security": [
          {
            "cookieAuth": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CreateDiscussion"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Discussion created successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Discussion"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized"
          }
        }
      }
    },
    "/api/discussions/{discussion_id}": {
      "patch": {
        "tags": ["Discussions"],
        "summary": "Update discussion",
        "description": "Update a discussion",
        "security": [
          {
            "cookieAuth": []
          }
        ],
        "parameters": [
          {
            "name": "discussion_id",
            "in": "path",
            "required": true,
            "description": "ID of the discussion",
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UpdateDiscussion"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Discussion updated successfully"
          },
          "401": {
            "description": "Unauthorized"
          }
        }
      },
      "delete": {
        "tags": ["Discussions"],
        "summary": "Delete discussion",
        "description": "Delete a discussion",
        "security": [
          {
            "cookieAuth": []
          }
        ],
        "parameters": [
          {
            "name": "discussion_id",
            "in": "path",
            "required": true,
            "description": "ID of the discussion",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Discussion deleted successfully"
          },
          "401": {
            "description": "Unauthorized"
          }
        }
      }
    },
    "/api/discussions/{discussion_id}/tasks": {
      "post": {
        "tags": ["Discussions"],
        "summary": "Create task for discussion",
        "description": "Create a task related to a discussion",
        "security": [
          {
            "cookieAuth": []
          }
        ],
        "parameters": [
          {
            "name": "discussion_id",
            "in": "path",
            "required": true,
            "description": "ID of the discussion",
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/TaskRequestInput"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Task created successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/TaskRequestView"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized"
          }
        }
      },
      "get": {
        "tags": ["Discussions"],
        "summary": "Get tasks for discussion",
        "description": "Get tasks related to a discussion",
        "security": [
          {
            "cookieAuth": []
          }
        ],
        "parameters": [
          {
            "name": "discussion_id",
            "in": "path",
            "required": true,
            "description": "ID of the discussion",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Tasks for the discussion",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/TaskRequestView"
                  }
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized"
          }
        }
      }
    },
    "/api/discussions/{discussion_id}/chat_users": {
      "post": {
        "tags": ["Discussions"],
        "summary": "Add users to discussion",
        "description": "Add users to a discussion chat",
        "security": [
          {
            "cookieAuth": []
          }
        ],
        "parameters": [
          {
            "name": "discussion_id",
            "in": "path",
            "required": true,
            "description": "ID of the discussion",
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/DiscussionUsers"
              }
            },
            "application/x-www-form-urlencoded": {
              "schema": {
                "$ref": "#/components/schemas/DiscussionUsers"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Users added to discussion"
          },
          "401": {
            "description": "Unauthorized"
          }
        }
      },
      "delete": {
        "tags": ["Discussions"],
        "summary": "Remove users from discussion",
        "description": "Remove users from a discussion chat",
        "security": [
          {
            "cookieAuth": []
          }
        ],
        "parameters": [
          {
            "name": "discussion_id",
            "in": "path",
            "required": true,
            "description": "ID of the discussion",
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/DiscussionUsers"
              }
            },
            "application/x-www-form-urlencoded": {
              "schema": {
                "$ref": "#/components/schemas/DiscussionUsers"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Users removed from discussion"
          },
          "401": {
            "description": "Unauthorized"
          }
        }
      }
    },
    "/api/discussions/{discussion_id}/sse": {
      "get": {
        "tags": ["Discussions"],
        "summary": "Discussion SSE stream",
        "description": "Server-sent events stream for discussion updates",
        "security": [
          {
            "cookieAuth": []
          }
        ],
        "parameters": [
          {
            "name": "discussion_id",
            "in": "path",
            "required": true,
            "description": "ID of the discussion",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "topic_id",
            "in": "query",
            "description": "Filter by topic ID",
            "required": false,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "SSE stream of discussion updates",
            "content": {
              "text/event-stream": {
                "schema": {
                  "type": "string"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized"
          }
        }
      }
    },
    "/api/discussions/{discussion_id}/posts": {
      "post": {
        "tags": ["Discussions"],
        "summary": "Create post in discussion",
        "description": "Create a new post in a discussion",
        "security": [
          {
            "cookieAuth": []
          }
        ],
        "parameters": [
          {
            "name": "discussion_id",
            "in": "path",
            "required": true,
            "description": "ID of the discussion",
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "multipart/form-data": {
              "schema": {
                "$ref": "#/components/schemas/PostInput"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Post created successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Post"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized"
          }
        }
      }
    },
    "/api/wallet/history": {
      "get": {
        "tags": ["Wallet"],
        "summary": "Get wallet transaction history",
        "description": "Get transaction history for the current user's wallet",
        "security": [
          {
            "cookieAuth": []
          }
        ],
        "parameters": [
          {
            "name": "start",
            "in": "query",
            "description": "Pagination start index",
            "required": false,
            "schema": {
              "type": "integer",
              "default": 0
            }
          },
          {
            "name": "count",
            "in": "query",
            "description": "Number of transactions to return",
            "required": false,
            "schema": {
              "type": "integer",
              "default": 20
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Wallet transaction history",
            "content": {
              "text/html": {
                "schema": {
                  "type": "string"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized"
          }
        }
      }
    },
    "/api/wallet/balance": {
      "get": {
        "tags": ["Wallet"],
        "summary": "Get wallet balance",
        "description": "Get the current user's wallet balance",
        "security": [
          {
            "cookieAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "Wallet balance",
            "content": {
              "text/html": {
                "schema": {
                  "type": "string"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized"
          }
        }
      }
    },
    "/api/wallet/withdraw": {
      "post": {
        "tags": ["Wallet"],
        "summary": "Withdraw from wallet",
        "description": "Withdraw money from the current user's wallet",
        "security": [
          {
            "cookieAuth": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/WithdrawData"
              }
            },
            "application/x-www-form-urlencoded": {
              "schema": {
                "$ref": "#/components/schemas/WithdrawData"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Withdrawal successful"
          },
          "401": {
            "description": "Unauthorized"
          },
          "400": {
            "description": "Invalid withdrawal amount or email not verified"
          }
        }
      }
    },
    "/api/wallet/deposit": {
      "post": {
        "tags": ["Wallet"],
        "summary": "Deposit to wallet",
        "description": "Send money to the current user's wallet",
        "security": [
          {
            "cookieAuth": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/DepositData"
              }
            },
            "application/x-www-form-urlencoded": {
              "schema": {
                "$ref": "#/components/schemas/DepositData"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Stripe link ",
            "content": {
              "application/json": {
                "schema": {
                  "type": "string",
                  "items": {
                    "$ref": "#/components/schemas/DepositLink"
                  }
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized"
          }
        }
      }
    },
    "/api/users/{user_id}/followers": {
      "get": {
        "tags": ["Follows"],
        "summary": "Get user followers",
        "description": "Get followers of a specific user",
        "security": [
          {
            "cookieAuth": []
          }
        ],
        "parameters": [
          {
            "name": "user_id",
            "in": "path",
            "required": true,
            "description": "ID of the user",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "List of followers",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/UserItemView"
                  }
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized"
          }
        }
      }
    },
    "/api/users/{user_id}/following": {
      "get": {
        "tags": ["Follows"],
        "summary": "Get users followed by user",
        "description": "Get users that a specific user is following",
        "security": [
          {
            "cookieAuth": []
          }
        ],
        "parameters": [
          {
            "name": "user_id",
            "in": "path",
            "required": true,
            "description": "ID of the user",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "List of followed users",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/UserItemView"
                  }
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized"
          }
        }
      }
    },
    "/api/replies/{reply_id}/like": {
      "post": {
        "tags": ["Replies"],
        "summary": "Like a reply",
        "description": "Add like to a specific reply",
        "security": [
          {
            "cookieAuth": []
          }
        ],
        "parameters": [
          {
            "name": "reply_id",
            "in": "path",
            "required": true,
            "description": "ID of the reply to like",
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/ReplyLikeInput"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Reply liked successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ReplyLikeResponse"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized"
          },
          "404": {
            "description": "Reply not found"
          }
        }
      }
    },
    "/api/replies/{reply_id}/unlike": {
      "delete": {
        "tags": ["Replies"],
        "summary": "Unlike a reply",
        "description": "Remove like from a specific reply",
        "security": [
          {
            "cookieAuth": []
          }
        ],
        "parameters": [
          {
            "name": "reply_id",
            "in": "path",
            "required": true,
            "description": "ID of the reply to unlike",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Reply unliked successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ReplyLikeResponse"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized"
          },
          "404": {
            "description": "Reply not found"
          }
        }
      }
    },
    "/api/followers/{follow_user_id}": {
      "post": {
        "tags": ["Follows"],
        "summary": "Follow user",
        "description": "Follow a specific user",
        "security": [
          {
            "cookieAuth": []
          }
        ],
        "parameters": [
          {
            "name": "follow_user_id",
            "in": "path",
            "required": true,
            "description": "ID of the user to follow",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "User followed successfully"
          },
          "401": {
            "description": "Unauthorized"
          },
          "404": {
            "description": "User not found"
          }
        }
      },
      "delete": {
        "tags": ["Follows"],
        "summary": "Unfollow user",
        "description": "Unfollow a specific user",
        "security": [
          {
            "cookieAuth": []
          }
        ],
        "parameters": [
          {
            "name": "follow_user_id",
            "in": "path",
            "required": true,
            "description": "ID of the user to unfollow",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "User unfollowed successfully"
          },
          "401": {
            "description": "Unauthorized"
          },
          "404": {
            "description": "User not found"
          }
        }
      },
      "get": {
        "tags": ["Follows"],
        "summary": "Check if following user",
        "description": "Check if current user is following a specific user",
        "security": [
          {
            "cookieAuth": []
          }
        ],
        "parameters": [
          {
            "name": "follow_user_id",
            "in": "path",
            "required": true,
            "description": "ID of the user to check",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Following status checked successfully"
          },
          "401": {
            "description": "Unauthorized"
          },
          "404": {
            "description": "User not found"
          }
        }
      }
    },
    "/api/tags": {
      "get": {
        "tags": ["Tags"],
        "summary": "Get tags with optional filtering and pagination",
        "description": "Retrieve a list of tags with optional filtering by prefix and pagination support",
        "security": [],
        "parameters": [
          {
            "name": "start_with",
            "in": "query",
            "description": "Filter tags that start with this string",
            "required": false,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "order_dir",
            "in": "query",
            "description": "Order direction",
            "required": false,
            "schema": {
              "type": "string",
              "enum": ["ASC", "DESC"]
            }
          },
          {
            "name": "start",
            "in": "query",
            "description": "Pagination start index",
            "required": false,
            "schema": {
              "type": "integer",
              "minimum": 0,
              "default": 0
            }
          },
          {
            "name": "count",
            "in": "query",
            "description": "Number of tags to return",
            "required": false,
            "schema": {
              "type": "integer",
              "minimum": 1,
              "default": 20
            }
          }
        ],
        "responses": {
          "200": {
            "description": "List of tags matching the specified criteria",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "type": "string"
                  }
                }
              }
            }
          }
        }
      }
    }
  },
  "components": {
    "schemas": {
      "TotpResponse": {
        "type": "object",
        "properties": {
          "token": {
            "type": "string",
            "description": "The TOTP token"
          },
          "url": {
            "type": "string",
            "description": "The URL for the TOTP setup"
          },
          "secret": {
            "type": "string",
            "description": "The shared secret for TOTP"
          }
        },
        "required": ["token", "url", "secret"]
      },
      "SocialSignInput": {
        "type": "object",
        "required": ["token"],
        "properties": {
          "token": {
            "type": "string",
            "description": "Social media authentication token"
          }
        }
      },
      "AuthLoginInput": {
        "type": "object",
        "required": ["username", "password"],
        "properties": {
          "username": {
            "type": "string",
            "description": "Username"
          },
          "password": {
            "type": "string",
            "minLength": 6,
            "description": "Password (minimum 6 characters)"
          }
        }
      },
      "AuthRegisterInput": {
        "type": "object",
        "required": ["username", "password"],
        "properties": {
          "username": {
            "type": "string",
            "description": "Username"
          },
          "password": {
            "type": "string",
            "minLength": 6,
            "description": "Password (minimum 6 characters)"
          },
          "email": {
            "type": "string",
            "format": "email",
            "description": "Email address"
          },
          "bio": {
            "type": "string",
            "description": "User biography"
          },
          "birth_day": {
            "type": "string",
            "format": "date-time",
            "description": "Birth date"
          },
          "full_name": {
            "type": "string",
            "minLength": 6,
            "description": "Full name (minimum 6 characters)"
          },
          "image_uri": {
            "type": "string",
            "minLength": 6,
            "description": "Profile image URI"
          }
        }
      },
      "ForgotPasswordInput": {
        "type": "object",
        "required": ["email_or_username"],
        "properties": {
          "email_or_username": {
            "type": "string",
            "description": "Email address or username"
          }
        }
      },
      "ResetPasswordInput": {
        "type": "object",
        "required": ["old_password", "new_password", "code"],
        "properties": {
          "old_password": {
            "type": "string",
            "minLength": 6,
            "description": "Current password (minimum 6 characters)"
          },
          "new_password": {
            "type": "string",
            "minLength": 6,
            "description": "New password (minimum 6 characters)"
          },
          "code": {
            "type": "string",
            "minLength": 6,
            "description": "Verification code (minimum 6 characters)"
          }
        }
      },
      "ForgotPasswordResetInput": {
        "type": "object",
        "required": ["password", "code", "email_or_username"],
        "properties": {
          "password": {
            "type": "string",
            "minLength": 6,
            "description": "New password (minimum 6 characters)"
          },
          "code": {
            "type": "string",
            "minLength": 6,
            "description": "Verification code"
          },
          "email_or_username": {
            "type": "string",
            "description": "Email address or username"
          }
        }
      },
      "SetPasswordInput": {
        "type": "object",
        "required": ["password"],
        "properties": {
          "password": {
            "type": "string",
            "minLength": 6,
            "description": "New password"
          },
          "code": {
            "type": "string",
            "minLength": 6,
            "description": "Verification code"
          }
        }
      },
      "UpdatePasswordInput": {
        "type": "object",
        "required": ["old_password", "new_password"],
        "properties": {
          "old_password": {
            "type": "string",
            "minLength": 6,
            "description": "Current password"
          },
          "new_password": {
            "type": "string",
            "minLength": 6,
            "description": "New password"
          },
          "code": {
            "type": "string",
            "minLength": 6,
            "description": "Verification code"
          }
        }
      },
      "DeliverTaskRequestInput": {
        "type": "object",
        "required": ["post_id"],
        "properties": {
          "post_id": {
            "type": "string",
            "description": "ID of the post related to task delivery"
          }
        }
      },
      "TaskRequestOfferInput": {
        "type": "object",
        "required": ["amount"],
        "properties": {
          "amount": {
            "type": "integer",
            "format": "int64",
            "minimum": 100,
            "description": "Offer amount"
          }
        }
      },
      "AuthResponse": {
        "type": "object",
        "properties": {
          "token": {
            "type": "string",
            "description": "JWT authentication token"
          },
          "user": {
            "$ref": "#/components/schemas/LocalUser"
          }
        }
      },
      "LocalUser": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "description": "User ID"
          },
          "username": {
            "type": "string",
            "description": "Username"
          },
          "full_name": {
            "type": "string",
            "nullable": true,
            "description": "Full name"
          },
          "birth_date": {
            "type": "string",
            "format": "date-time",
            "nullable": true,
            "description": "Birth date"
          },
          "phone": {
            "type": "string",
            "nullable": true,
            "description": "Phone number"
          },
          "email_verified": {
            "type": "string",
            "nullable": true,
            "description": "Verified email address"
          },
          "bio": {
            "type": "string",
            "nullable": true,
            "description": "User biography"
          },
          "social_links": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "nullable": true,
            "description": "Social media links"
          },
          "image_uri": {
            "type": "string",
            "nullable": true,
            "description": "Profile image URI"
          },
          "is_otp_enabled": {
            "type": "boolean",
            "nullable": true,
            "description": "Whether user has OTP enabled"
          }
        }
      },
      "UserNotification": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "description": "Notification ID"
          },
          "created_by": {
            "type": "string",
            "description": "User who created the notification"
          },
          "event": {
            "$ref": "#/components/schemas/UserNotificationEvent"
          },
          "title": {
            "type": "string",
            "description": "Notification title"
          },
          "is_read": {
            "type": "boolean",
            "default": false,
            "description": "Whether the notification has been read"
          },
          "metadata": {
            "type": "object",
            "description": "Additional notification metadata"
          },
          "created_at": {
            "type": "string",
            "format": "date-time",
            "description": "Creation timestamp"
          }
        }
      },
      "UserNotificationEvent": {
        "type": "string",
        "enum": [
          "UserBalanceUpdate",
          "UserChatMessage",
          "UserCommunityPost",
          "UserFollowAdded",
          "UserLikePost",
          "UserTaskRequestCreated",
          "UserTaskRequestDelivered",
          "UserTaskRequestReceived"
        ],
        "description": "Type of notification event"
      },
      "TaskRequestView": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "description": "Task request ID"
          },
          "created_by": {
            "$ref": "#/components/schemas/UserView"
          },
          "participants": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/TaskRequestViewParticipant"
            },
            "nullable": true,
            "description": "Task participants"
          },
          "request_txt": {
            "type": "string",
            "description": "Task request description"
          },
          "donors": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/TaskRequestDonorView"
            },
            "description": "Task donors"
          },
          "currency": {
            "$ref": "#/components/schemas/CurrencySymbol"
          },
          "acceptance_period": {
            "type": "integer",
            "format": "int32",
            "description": "Acceptance period in hours"
          },
          "delivery_period": {
            "type": "integer",
            "format": "int32",
            "description": "Delivery period in hours"
          },
          "due_at": {
            "type": "string",
            "format": "date-time",
            "description": "Task due date"
          },
          "created_at": {
            "type": "string",
            "format": "date-time",
            "description": "Task creation timestamp"
          },
          "wallet_id": {
            "type": "string",
            "description": "Wallet ID"
          }
        }
      },
      "TaskRequestViewParticipant": {
        "type": "object",
        "properties": {
          "user": {
            "$ref": "#/components/schemas/UserView"
          },
          "status": {
            "$ref": "#/components/schemas/TaskParticipantStatus"
          },
          "timelines": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/TaskParticipantTimeline"
            },
            "nullable": true,
            "description": "Timeline of status changes for this participant"
          }
        }
      },
      "TaskRequestDonorView": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "description": "Donor ID"
          },
          "user": {
            "$ref": "#/components/schemas/UserView"
          },
          "amount": {
            "type": "integer",
            "format": "int64",
            "description": "Donation amount"
          }
        }
      },
      "UserView": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "description": "User ID"
          },
          "username": {
            "type": "string",
            "description": "Username"
          },
          "full_name": {
            "type": "string",
            "nullable": true,
            "description": "Full name"
          },
          "birth_date": {
            "type": "string",
            "format": "date-time",
            "nullable": true,
            "description": "Birth date"
          },
          "phone": {
            "type": "string",
            "nullable": true,
            "description": "Phone number"
          },
          "email_verified": {
            "type": "string",
            "nullable": true,
            "description": "Verified email address"
          },
          "bio": {
            "type": "string",
            "nullable": true,
            "description": "User biography"
          },
          "social_links": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "nullable": true,
            "description": "Social media links"
          },
          "image_uri": {
            "type": "string",
            "nullable": true,
            "description": "Profile image URI"
          },
          "is_otp_enabled": {
            "type": "boolean",
            "description": "Whether user has OTP enabled"
          }
        }
      },
      "TaskParticipantStatus": {
        "type": "string",
        "enum": ["Requested", "Rejected", "Accepted", "Delivered"],
        "description": "Status of task participant"
      },
      "TaskParticipantTimeline": {
        "type": "object",
        "properties": {
          "status": {
            "$ref": "#/components/schemas/TaskParticipantStatus"
          },
          "date": {
            "type": "string",
            "format": "date-time",
            "description": "Timestamp when this status change occurred"
          }
        },
        "required": ["status", "date"],
        "description": "Timeline entry tracking status changes for a task participant"
      },
      "CurrencySymbol": {
        "type": "string",
        "enum": ["USD", "REEF", "ETH"],
        "description": "Currency symbol"
      },
      "TaskViewForParticipant": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "description": "Task request ID"
          },
          "created_by": {
            "$ref": "#/components/schemas/UserView"
          },
          "request_txt": {
            "type": "string",
            "description": "Task request description"
          },
          "total_amount": {
            "type": "integer",
            "format": "int64",
            "description": "Total amount from all donors"
          },
          "donors": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/TaskRequestDonorView"
            },
            "description": "Task donors"
          },
          "currency": {
            "$ref": "#/components/schemas/CurrencySymbol"
          },
          "end_at": {
            "type": "string",
            "format": "date-time",
            "description": "Task end date (due date)"
          },
          "accept_by": {
            "type": "string",
            "format": "date-time",
            "description": "Deadline to accept the task"
          },
          "deliver_by": {
            "type": "string",
            "format": "date-time",
            "nullable": true,
            "description": "Deadline to deliver the task (only set if task is accepted)"
          },
          "participants": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/TaskRequestViewParticipant"
            },
            "description": "Task participants (filtered to current user)"
          },
          "created_at": {
            "type": "string",
            "format": "date-time",
            "description": "Task creation timestamp"
          }
        },
        "required": [
          "id",
          "created_by",
          "request_txt",
          "total_amount",
          "donors",
          "currency",
          "end_at",
          "accept_by",
          "participants",
          "created_at"
        ],
        "description": "Task view specifically for participants, containing computed fields and filtered data"
      },
      "EmailVerificationStartInput": {
        "type": "object",
        "required": ["email"],
        "properties": {
          "email": {
            "type": "string",
            "format": "email",
            "description": "Email address to verify"
          }
        }
      },
      "EmailVerificationConfirmInput": {
        "type": "object",
        "required": ["email", "code"],
        "properties": {
          "email": {
            "type": "string",
            "format": "email",
            "description": "Email address"
          },
          "code": {
            "type": "string",
            "minLength": 6,
            "maxLength": 6,
            "description": "6-digit verification code"
          }
        }
      },
      "ProfileSettingsFormInput": {
        "type": "object",
        "properties": {
          "username": {
            "type": "string",
            "nullable": true,
            "minLength": 6,
            "pattern": "^[A-Za-z0-9_]{6,}$",
            "description": "Username (optional) - Letters, numbers and '_'. Minimum 6 characters"
          },
          "full_name": {
            "type": "string",
            "minLength": 6,
            "nullable": true,
            "description": "Full name (minimum 6 characters, optional)"
          },
          "bio": {
            "type": "string",
            "nullable": true,
            "description": "Bio (optional)"
          },
          "birth_date": {
            "type": "string",
            "format": "date-time",
            "nullable": true,
            "description": "Birth date in RFC3339 format (optional) - Must be between 10 and 120 years ago"
          },
          "image_url": {
            "type": "string",
            "format": "binary",
            "nullable": true,
            "description": "Profile image file (optional)"
          },
          "social_links": {
            "type": "array",
            "items": {
              "type": "string",
              "format": "uri"
            },
            "nullable": true,
            "description": "Social media links (optional) - Must be HTTPS URLs from x.com, instagram.com, youtube.com, or facebook.com. No duplicate domains allowed."
          }
        }
      },
      "PostInput": {
        "type": "object",
        "required": ["title"],
        "properties": {
          "title": {
            "type": "string",
            "minLength": 5,
            "description": "Post title (minimum 5 characters)"
          },
          "content": {
            "type": "string",
            "minLength": 1,
            "description": "Post content (minimum 1 characters)"
          },
          "tags": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "maxItems": 5,
            "description": "Tags for the post (maximum 5)"
          },
          "file_1": {
            "type": "string",
            "format": "binary",
            "description": "Optional file attachment"
          }
        }
      },
      "Post": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "description": "Post ID"
          },
          "belongs_to": {
            "type": "string",
            "description": "Discussion ID this post belongs to"
          },
          "created_by": {
            "type": "string",
            "description": "User ID who created the post"
          },
          "title": {
            "type": "string",
            "description": "Post title"
          },
          "content": {
            "type": "string",
            "description": "Post content"
          },
          "media_links": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "description": "Media links attached to the post"
          },
          "likes_nr": {
            "type": "integer",
            "description": "Number of likes"
          },
          "replies_nr": {
            "type": "integer",
            "description": "Number of replies"
          },
          "created_at": {
            "type": "string",
            "format": "date-time",
            "description": "Creation timestamp"
          },
          "updated_at": {
            "type": "string",
            "format": "date-time",
            "description": "Last update timestamp"
          }
        }
      },
      "PostView": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "description": "Post ID"
          },
          "created_by": {
            "$ref": "#/components/schemas/UserView",
            "description": "User who created the post"
          },
          "belongs_to": {
            "type": "string",
            "description": "Discussion ID this post belongs to"
          },
          "title": {
            "type": "string",
            "description": "Post title"
          },
          "content": {
            "type": "string",
            "nullable": true,
            "description": "Post content"
          },
          "media_links": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "nullable": true,
            "description": "Media links attached to the post"
          },
          "created_at": {
            "type": "string",
            "format": "date-time",
            "description": "Creation timestamp"
          },
          "updated_at": {
            "type": "string",
            "format": "date-time",
            "description": "Last update timestamp"
          },
          "replies_nr": {
            "type": "integer",
            "format": "int64",
            "description": "Number of replies"
          },
          "likes_nr": {
            "type": "integer",
            "format": "int64",
            "description": "Number of likes"
          }
        }
      },
      "PostLikeResponse": {
        "type": "object",
        "properties": {
          "likes_count": {
            "type": "integer",
            "description": "Updated likes count"
          }
        }
      },
      "PostReplyInput": {
        "type": "object",
        "required": ["title", "content"],
        "properties": {
          "content": {
            "type": "string",
            "minLength": 5,
            "description": "Reply content (minimum 5 characters)"
          }
        }
      },
      "ReplyView": {
        "type": "object",
        "required": [
          "id",
          "user",
          "likes_nr",
          "content",
          "created_at",
          "updated_at"
        ],
        "properties": {
          "id": {
            "type": "string",
            "description": "Reply ID"
          },
          "user": {
            "$ref": "#/components/schemas/UserView",
            "description": "User who created the reply"
          },
          "likes_nr": {
            "type": "integer",
            "format": "int32",
            "minimum": 0,
            "description": "Number of likes this reply has received"
          },
          "content": {
            "type": "string",
            "description": "Reply content"
          },
          "created_at": {
            "type": "string",
            "format": "date-time",
            "description": "Creation timestamp"
          },
          "updated_at": {
            "type": "string",
            "format": "date-time",
            "description": "Last update timestamp"
          }
        }
      },
      "Discussion": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "description": "Discussion ID"
          },
          "title": {
            "type": "string",
            "description": "Discussion title"
          },
          "description": {
            "type": "string",
            "description": "Discussion description"
          },
          "created_by": {
            "type": "string",
            "description": "User ID who created the discussion"
          },
          "private_discussion_user_ids": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "description": "User IDs for private discussions"
          },
          "r_created": {
            "type": "string",
            "format": "date-time",
            "description": "Creation timestamp"
          }
        }
      },
      "CreateDiscussion": {
        "type": "object",
        "required": ["community_id", "title", "private_discussion_users_final"],
        "properties": {
          "community_id": {
            "type": "string",
            "example": "community-123"
          },
          "title": {
            "type": "string",
            "minLength": 5,
            "example": "My discussion title"
          },
          "image_uri": {
            "type": "string",
            "format": "uri",
            "nullable": true,
            "example": "https://example.com/image.png"
          },
          "chat_user_ids": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "nullable": true,
            "example": ["user1", "user2"]
          },
          "private_discussion_users_final": {
            "type": "boolean",
            "example": false
          }
        }
      },
      "UpdateDiscussion": {
        "type": "object",
        "properties": {
          "title": {
            "type": "string",
            "description": "Discussion title"
          },
          "description": {
            "type": "string",
            "description": "Discussion description"
          }
        }
      },
      "DiscussionUsers": {
        "type": "object",
        "required": ["user_ids"],
        "properties": {
          "user_ids": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "description": "Array of user IDs"
          }
        }
      },
      "TaskRequestInput": {
        "type": "object",
        "required": ["content"],
        "properties": {
          "content": {
            "type": "string",
            "minLength": 5,
            "description": "Task request description (min 5 characters)"
          },
          "participant": {
            "type": "string",
            "nullable": true,
            "description": "Optional participant identifier"
          },
          "offer_amount": {
            "type": "integer",
            "format": "int64",
            "minimum": 1,
            "nullable": true,
            "description": "Optional offer amount, must be at least 1"
          },
          "acceptance_period": {
            "type": "integer",
            "format": "int32",
            "minimum": 1,
            "nullable": true,
            "description": "Optional acceptance period in days"
          },
          "delivery_period": {
            "type": "integer",
            "format": "int32",
            "minimum": 1,
            "nullable": true,
            "description": "Optional delivery period in days"
          }
        }
      },
      "WithdrawData": {
        "type": "object",
        "required": ["amount"],
        "properties": {
          "amount": {
            "type": "integer",
            "minimum": 100,
            "description": "Amount to withdraw (minimum 100)"
          }
        }
      },
      "DepositData": {
        "type": "object",
        "required": ["amount"],
        "properties": {
          "amount": {
            "type": "integer",
            "minimum": 100,
            "description": "Amount to withdraw (minimum 100)"
          }
        }
      },
      "DepositLink": {
        "type": "string"
      },
      "OtpValidationInput": {
        "type": "object",
        "required": ["token"],
        "properties": {
          "token": {
            "type": "string",
            "description": "OTP token from authenticator app"
          }
        }
      },
      "UserItemView": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "description": "User ID"
          },
          "username": {
            "type": "string",
            "description": "Username"
          },
          "name": {
            "type": "string",
            "description": "Full name"
          },
          "image_url": {
            "type": "string",
            "description": "URL of the user's profile image"
          }
        }
      },
      "ReplyLikeInput": {
        "type": "object",
        "properties": {
          "count": {
            "type": "integer",
            "format": "int16",
            "minimum": 1,
            "nullable": true,
            "description": "Number of likes to add (optional, defaults to 1)"
          }
        }
      },
      "ReplyLikeResponse": {
        "type": "object",
        "required": ["likes_count"],
        "properties": {
          "likes_count": {
            "type": "integer",
            "format": "int32",
            "description": "Updated total likes count for the reply"
          }
        }
      },
      "DiscussionPostView": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "description": "Post ID"
          },
          "created_by_name": {
            "type": "string",
            "description": "Username of post creator"
          },
          "belongs_to_uri": {
            "type": "string",
            "nullable": true,
            "description": "URI of the discussion this post belongs to"
          },
          "belongs_to_id": {
            "type": "string",
            "description": "ID of the discussion this post belongs to"
          },
          "title": {
            "type": "string",
            "description": "Post title"
          },
          "r_title_uri": {
            "type": "string",
            "nullable": true,
            "description": "URI-friendly version of the title"
          },
          "content": {
            "type": "string",
            "description": "Post content"
          },
          "media_links": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "nullable": true,
            "description": "Links to media files"
          },
          "r_created": {
            "type": "string",
            "format": "date-time",
            "description": "Creation timestamp"
          },
          "replies_nr": {
            "type": "integer",
            "format": "int64",
            "description": "Number of replies"
          },
          "topic": {
            "type": "object",
            "nullable": true,
            "description": "Discussion topic information"
          },
          "access_rule": {
            "type": "object",
            "nullable": true,
            "description": "Access control rules for the post"
          },
          "viewer_access_rights": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "description": "Access rights of the current viewer"
          },
          "has_view_access": {
            "type": "boolean",
            "description": "Whether the current user has view access to this post"
          }
        }
      }
    }
  },
  "securitySchemes": {
    "cookieAuth": {
      "type": "apiKey",
      "in": "cookie",
      "name": "jwt"
    },
    "bearerAuth": {
      "type": "http",
      "scheme": "bearer",
      "bearerFormat": "JWT"
    }
  },
  "tags": [
    {
      "name": "Authentication",
      "description": "User authentication and authorization endpoints"
    },
    {
      "name": "Users",
      "description": "User management endpoints"
    },
    {
      "name": "Posts",
      "description": "Post management endpoints"
    },
    {
      "name": "Notifications",
      "description": "User notification endpoints"
    },
    {
      "name": "Tasks",
      "description": "Task management endpoints"
    },
    {
      "name": "Discussions",
      "description": "Discussion management endpoints"
    },
    {
      "name": "Wallet",
      "description": "Wallet and transaction endpoints"
    },
    {
      "name": "Follows",
      "description": "User following and follower endpoints"
    },
    {
      "name": "Tags",
      "description": "Tags"
    },
    {
      "name": "Replies",
      "description": "Reply management endpoints"
    }
  ]
}
